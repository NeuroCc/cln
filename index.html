<!DOCTYPE html>
<html>
<head>
<title>
NeuroCc Docker Elastic Swarm Mailer
</title>
<style>
html, body {
background-color: rgba(0,0,255,.33);
color: rgba(255,255,255,.89);
font-family: sans-serif;
font-size: 14px;


div, footer, h1 {
display: flex;
width: 80%;
padding : 20px;
border-radius : 5px;
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/3.4.0/es5-shim.min.js"></script>
</head>
<body>
<h1>NeuroCc Docker Elastic Swarm Mailer</h1>
<div id="container">
</div>
<div>
<h1>mailer</h1>
<input id="to" type="text" placeholder="adam@maildrop.cc" value="adam@maildrop.cc" />
<input id="subject" type="text" placeholder="subject" value="subject">
<textarea="content" style="border-radius:5px;width:80%;padding:20px;background-color:rgba(0,0,255,.33);color:rgba(255,255,255,.89);font-family:cursive;font-size:16px" cols="40" rows="5" placeholder="content">
</textarea>
<button id="send_email">Send Email</button>
<span id="message"></span>
</div>
<footer>
&copy; NeuroCc 2016-Present
</footer>
<script>
(function(){

var timestamp = Date.now().toString();

var from = "neuro_cln";

var to = "neuro_cc now running... \n timestamp: " + timestamp + " \n let's do this! \n :-) \n";

var subject = "timestamp: " + timestamp;

var text = "neuro_cln" + timestamp;

document.getElementById("send_email").addEventListener("click", function() {

to = document.getElementById("to").getAttribute("value");

subject = document.getElementById("subject").getAttribute("value");

text = document.getElementById("content").getAttribute("value");

document.getElementById("message").innerHTML = "Sending E-mail... \n Please wait. \n :-) \n Haha. \n :-)";


var Promise = require("promises/domains");
var toggle = ["pink","purple","white"];
var ti = 0;
var grokResolveH = function(res){
document.getElementById("message")
    .setAttribute("style", "color:"+toggle[ti])
    .innerHTML += "Resolving...<br/>";
  document.getElementById("message").innerHTML += JSON.stringify(res.data);
  ti++;
};

var grokRejectH = function(err) {
document.getElementById("message")
    .setAttribute("style","color:red")
    .innerHTML += "Rejecting...<br/>";
  document.getElementById("message").innerHTML = JSON.stringiy(err);
};

var grokUrl = "https://neurocc.github.io/cln/grok";

var grokRes = {"data":"Initial Data","timestamp":timestamp};

var grokErr = {"message":"Initial Error","timestamp":timestamp};


var promise = new Promise(function (grokResolveH, grokRejectH) {
var get = get || function() { alert("no get function!"); };
  get(grokUrl, function (grokErr, grokRes) {
    if (grokErr) {
      grokRejectH(grokErr);
    } else {
       grokResolveH(grokRes);
    }
  });
})();



var grokFinalError = {"message":"Final Message","timestamp":timestamp};
var grokFinalValue = {"data":"Final Data","timestamp":timestamp};

promise.then(function(grokFinalValue) {
  document.getElementById("message")
    .setAttribute("style", "color:"+toggle[ti])
    .innerHTML += "Final Value: \n" + JSON.stringify(grokFinalValue);
    ti++;
}, function(grokFinalError) {
  document.getElementById("message")
    .setAttribute("style", "color:red")
    .innerHTML += "Final Error: \n" + JSON.stringify(grokFinalError);
});
})
})();
</body>
</html>

